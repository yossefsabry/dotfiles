# Please note not all available settings/options are set here.
# For a full list, see the wiki

# Monitor configuration
monitor=eDP-1,preferred,0x0,1

# Enable or disable logs
debug:disable_logs = false

# Execute your favorite apps at launch
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
# exec-once = flameshot # enable if there is no auto start for flameshot
exec-once = keypop # my key press screen
exec-once = waybar  &  hypridle &  hyprpaper
exec-once = dunst # for notify system
# For moving gif wallpaper
# exec-once = swww-daemon & sleep 0.1 & swww img '/home/yossef/dotfiles/background/1.gif' 
exec-once = copyq --start-server
exec-once = wl-clipboard-history -t 
exec-once = wl-paste --watch cliphist store
exec-once = /usr/lib/polkit-kde-authentication-agent-1

# Set environment variables
env = LIBVA_DRIVER_NAME,nvidia
env = XDG_SESSION_DESKTOP,Hyprland
env = NVD_BACKEND,direct
env = ELECTRON_OZONE_PLATFORM_HINT,wayland
env = GBM_BACKEND,nvidia-drm
env = __GLX_VENDOR_LIBRARY_NAME,nvidia
env = WLR_NO_HARDWARE_CURSORS,1
env = GTK_THEME,Adwaita:dark
env = GTK2_RC_FILES,/usr/share/themes/Adwaita-dark/gtk-2.0/gtkrc
env = QT_STYLE_OVERRIDE,adwaita-dark
env = CLUTTER_DEFAULT_FPS,144
env = CLUTTER_BACKEND,wayland
env = QT_QPA_PLATFORM,wayland
env = XDG_SESSION_TYPE,wayland
env = SDL_VIDEODRIVER,wayland,x11,dga
env = GDK_BACKEND,wayland,x11
# cursor size
env = XCURSOR_SIZE, 32
env = HYPRCURSOR_SIZE, 32


# General Settings
general {
    gaps_in = 3
    gaps_out = 10
    border_size = 2
    col.active_border = rgba(ff42be7a) rgba(b7a1f77c) 35deg
    col.inactive_border = rgba(595959aa)
    layout = dwindle
    allow_tearing = false
}

# Window decorations and blur effects
decoration {
    rounding = 10
    dim_inactive = false # for remove shadow from window that it not selected
    # active_opacity = 1.0
    # inactive_opacity = 1.0
    # fullscreen_opacity = 1.0
    blur {
        enabled = true
        size = 80
        passes = 0
        new_optimizations = true
        xray = true
        noise = 0.0117
        contrast = 0.9000
        brightness = 0.9999
        vibrancy = 9.9999
        popups = true
    }
}

# # Animations
animations {
    enabled = yes
    bezier = myBezier, 0.02, 0.01, 0.01, 0.15
    animation = global, 1, 1.5, myBezier
    animation = windows, 1, 1.4, myBezier, slide
    animation = workspaces, 1, 1.8, myBezier, slidefadevert
    animation = fade, 1, 1.5, myBezier
    # animation = windowsOut, 1, 3, myBezier, slide
    # animation = borderangle, 1, 2, myBezier
    # animation = windowsMove, 1, 2, myBezier
    # animation = border, 1, 2, myBezier
    
    animation = border , 0
    animation = borderangle, 0
    animation = windowsOut, 0
    animation = windowsMove, 0
}

# Input settings
input {
    kb_layout = us,ara
    kb_variant =
    kb_options = grp:win_space_toggle,caps:none,grp:shift_caps_switch,compose:prsc

    follow_mouse = 1
    touchpad {
        natural_scroll = off
    }
    repeat_delay = 300
    repeat_rate = 50
    sensitivity = 0
}

# Dwindle Layout Settings
dwindle {
    pseudotile = yes
    preserve_split = yes
}

# OpenGL settings
opengl {
    nvidia_anti_flicker = true
}

# XWayland configuration
xwayland {
    force_zero_scaling = true
}

misc {
    disable_hyprland_logo = true
    disable_splash_rendering = true
}

group {
  groupbar {
    enabled = true

    height = 32
    font_size = 14
    render_titles = true

    gradients = false   # IMPORTANT: no gradient, flat background

    # SOLID tab backgrounds (ff = fully opaque)
    col.active = rgba(7aa2f7ff)
    col.inactive = rgba(444444ff)
    col.locked_active = rgba(ffcc00ff)
    col.locked_inactive = rgba(777777ff)

    # SOLID text color
    text_color = rgba(ffffffff)
  }
}


# Keybindings
$mainMod = Alt

# Window rules
bind = $mainMod, Tab, cyclenext,           # change focus to another window

#window brigthness
binde = Super, up, exec, bright up
binde = Super, down, exec, bright down

bind = $mainMod, RETURN, exec, kitty
bind = $mainMod, w, killactive
bind = $mainMod, f, togglefloating
bind = $mainMod, u, togglesplit
bind = $mainMod, Q, exit
bind = $mainMod, m, fullscreen
bind = Super, l, exec, hyprlock
# bind = $mainMod, p, exec, [float; center;] pkill wofi; wofi --show drun
# allow icons
bind = $mainMod, p, exec, [float; center;] pkill wofi; wofi --show drun --allow-images

bind = $mainMod, x, movetoworkspace, special
bind = $mainMod, h, movefocus, l
bind = $mainMod, l, movefocus, r
bind = $mainMod, k, movefocus, u
bind = $mainMod, j, movefocus, d

# Switch workspaces with mainMod + [0-9]
bind = $mainMod, 1, workspace, 1
bind = $mainMod, 2, workspace, 2
bind = $mainMod, 3, workspace, 3
bind = $mainMod, 4, workspace, 4
bind = $mainMod, 5, workspace, 5
bind = $mainMod, 6, workspace, 6
bind = $mainMod, 7, workspace, 7

# Move active window to a workspace
bind = $mainMod SHIFT, 1, movetoworkspace, 1
bind = $mainMod SHIFT, 2, movetoworkspace, 2
bind = $mainMod SHIFT, 3, movetoworkspace, 3
bind = $mainMod SHIFT, 4, movetoworkspace, 4
bind = $mainMod SHIFT, 5, movetoworkspace, 5
bind = $mainMod SHIFT, 6, movetoworkspace, 6
bind = $mainMod SHIFT, 7, movetoworkspace, 7

# mouse config
bind = $mainMod, ampersand, workspace,  1
bind = $mainMod, mouse_down, workspace, e+1
bind = $mainMod, mouse_up, workspace, e-1
bindm = $mainMod, mouse:273, resizewindow
bindm = $mainMod, mouse:272, movewindow

# Resize windows
bind = $mainMod SHIFT, l, resizeactive, 100 0
bind = $mainMod SHIFT, h, resizeactive, -100 0
bind = $mainMod SHIFT, k, resizeactive, 0 -100
bind = $mainMod SHIFT, j, resizeactive, 0 100

# groups
# Toggle tabbed Windows
bind = $mainMod, t, exec, hyprctl dispatch togglegroup
# switch windows in tab group
bind = $mainMod , h, changegroupactive, b
bind = $mainMod , l, changegroupactive, f
bind = $mainMod , k, movewindoworgroup, u
bind = $mainMod , j, movewindoworgroup, d

# Volume controls
# bind = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
# bind = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
# bind = , XF86AudioMute, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle
bind = , XF86AudioRaiseVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ +5%
bind = , XF86AudioLowerVolume, exec, pactl set-sink-volume @DEFAULT_SINK@ -5%
bind = , XF86AudioMute, exec, pactl set-sink-mute @DEFAULT_SINK@ toggle


# Media controls
bind = , XF86AudioPlay, exec, playerctl -p spotify play-pause
bind = , XF86AudioPrev, exec, playerctl -p spotify previous
bind = , XF86AudioNext, exec, playerctl -p spotify next
bindl = , XF86AudioMedia, exec, playerctl play-pause
bindl = , XF86AudioStop, exec, playerctl stop

# Toggle Waybar (show and hide)
bind = $mainMod, n, exec, killall -SIGUSR1 waybar

# screen bright
bind = SUPER, Up, exec, ~/dotfiles/scripts/gui/bright up
bind = SUPER, Down, exec, ~/dotfiles/scripts/gui/bright down

## using grim for screen shot
# screenshot of a specific window and copying it to clipboard
# bind = $mainMod, s, exec, ~/dotfiles/scripts/gui/screenshot_window_copy_hypr.sh
# Bind key for taking a screenshot of the full screen and saving it to ~/Picures/screenshots/
# bind = $mainMod+SHIFT, s, exec, ~/dotfiles/scripts/gui/screenshot_full_save_hypr.sh

# using flameshot
bind = $mainMod, s, exec, flameshot gui --region "all"
bind = SUPER, s, exec, flameshot gui
# bind = SUPER, a, exec, flameshot gui --region "all"

# redshift (color blue and red)
# need to disable hdr to work (that a bad idea)
# bind = SUPER, r, exec, ~/dotfiles/scripts/hypr/toggleBlue

# waypaper show
bind = SUPER, w, exec, ~/dotfiles/scripts/hypr/ch_waypaper

# Example for a specific game, replace 'SteamGameClient' with the actual class
windowrule = idle_inhibit fullscreen, match:class .*
windowrule = idle_inhibit fullscreen, match:class lutris


# Window rules for specific apps
windowrule = opacity 0.9 override 0.8 override, match:class ^(Spotify)
windowrule = opacity 0.95 override 0.9 override, match:class ^(kitty)

# Blurring for specific UI components
# blurls = waybar # making a problem on render
# blurls = wofi # i not using it 

# Game-specific window rules
windowrule = no_anim on, match:class ^(gamescope)$
windowrule = fullscreen on, match:class ^(gamescope)$
windowrule = stay_focused on, match:class ^(gamescope)$
windowrule = idle_inhibit always, match:class ^(gamescope)$
windowrule = monitor DP-1, match:class ^(gamescope)$
windowrule = no_anim on, match:class ^(flameshot)$
windowrule = no_anim on, match:class ^(Rofi)$
windowrule = no_anim on, match:class ^(Wofi)$


# Additional rules for StarCitizen and Chrome
windowrule = no_anim on, match:class ^(StarCitizen)$
windowrule = idle_inhibit fullscreen, match:class ^(StarCitizen)$
windowrule = monitor DP-1, match:class ^(StarCitizen)$

# for showmethekey
windowrule = no_anim on, match:class ^(one.alynx.showmethekey)$
windowrule = no_anim on, match:class ^(showmethekey-gtk)$

# window places (application workspcecs)
windowrule = workspace 2, match:class (chromium)
windowrule = workspace 2, match:class (org.kde.falkon)
windowrule = workspace 2, match:class (brave-browser)

windowrule = workspace 3, match:class (org.keepassxc.KeePassXC)
windowrule = workspace 3, match:class (nemo)

windowrule = workspace 4, match:class (net.lutris.Lutris)
windowrule = workspace 4, match:class (com.usebottles.bottles)
windowrule = workspace 4, match:class (steam)

windowrule = workspace 4, match:class (obsidian)
windowrule = workspace 4, match:class (org.qbittorrent.qBittorrent)

windowrule = workspace 5, match:class (org.zealdocs.zeal)
windowrule = workspace 5, match:class (com.github.th_ch.youtube_music)

windowrule = workspace 6, match:class (Postman)
windowrule = workspace 6, match:class (burp-StartBurp)
windowrule = workspace 6, match:class (com.obsproject.Studio)

# To get more information about a windowâ€™s class, title, XWayland status 
# or its size, you can use `hyprctl clients`. (From Hyprland Wiki)
windowrule = float on, match:class ^(one.alynx.showmethekey)$
windowrule = float on, match:class ^(showmethekey-gtk)$ # make window floating
windowrule = pin on, match:class ^(showmethekey-gtk)$ # pin window

# Waybar blur
# layerrule = blur, waybar
# layerrule = blurpopups, waybar
# layerrule = ignorealpha 0.2, waybar

# show the key config
windowrule = float on, match:class ^(keypop)$
windowrule = pin on, match:class ^(keypop)$
windowrule = no_blur on, match:class ^(keypop)$
windowrule = no_shadow on, match:class ^(keypop)$
windowrule = border_size 0, match:class ^(keypop)$
windowrule = no_focus on, match:class ^(keypop)$
windowrule = opacity 1.0 override 1.0 override 1.0 override, match:class ^(keypop)$
windowrule = no_dim on, match:class ^(keypop)$
windowrule = no_anim on, match:class ^(keypop)$
windowrule = rounding 0, match:class ^(keypop)$
windowrule = move (monitor_w-860) 40, match:class ^(keypop)$

# Emulator
windowrule = opacity 1.0 override 1.0 override 1.0 override, match:class ^(Emulator)$
windowrule = no_dim on, match:class ^(Emulator)$
windowrule = no_anim on, match:class ^(Emulator)$
windowrule = opacity 1.0 override 1.0 override 1.0 override, match:class ^(Emulator)$
windowrule = no_dim on, match:class ^(Emulator)$
windowrule = no_anim on, match:class ^(Emulator)$


# initialClass: Windscribe
windowrule = float on, match:class ^(Windscribe)$
windowrule = opacity 1.0 override 1.0 override 1.0 override, match:class ^(Windscribe)$
windowrule = no_dim on, match:class ^(Windscribe)$
windowrule = no_anim on, match:class ^(Windscribe)$
windowrule = opacity 1.0 override 1.0 override 1.0 override, match:class ^(Windscribe)$
windowrule = no_dim on, match:class ^(Windscribe)$
windowrule = no_anim on, match:class ^(Windscribe)$

# new structure 
# Keypop - always on top, no effects
# windowrule = match:class ^(keypop)$, float on
# windowrule = match:class ^(keypop)$, pin on
# windowrule = match:class ^(keypop)$, no_blur on
# windowrule = match:class ^(keypop)$, no_shadow on
# windowrule = match:class ^(keypop)$, border_size 0
# windowrule = match:class ^(keypop)$, no_focus on
# windowrule = match:class ^(keypop)$, no_dim on
# windowrule = match:class ^(keypop)$, no_anim on
# windowrule = match:class ^(keypop)$, move (monitor_w-860) 40
